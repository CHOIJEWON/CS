# TypeScript êµ¬ì¡°ì  íƒ€ì´í•‘

JavaScriptëŠ” ë³¸ì§ˆì ìœ¼ë¡œ **ë• íƒ€ì´í•‘(duck typing)** ê¸°ë°˜ì´ë‹¤

![duck-typing](./img//duck-typing.jpeg)

ë• íƒ€ì´í•‘ì€ ê°ì²´ì˜ ë³€ìˆ˜, ë©”ì†Œë“œì˜ ì§‘í•©ì´ ê°ì²´ì˜ íƒ€ì…ì„ ê²°ì •í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

ì¦‰, ìœ„ì˜ ì‚¬ì§„ì²˜ëŸ¼ ì½˜ì„¼íŠ¸ë‚˜ ë¼ì§€ì½”ëƒ `ì´ë¦„` ì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.

ê½ƒì„ ìˆ˜ ìˆëŠ”ê°€ ì—†ëŠ”ê°€ ê½ƒì„ ìˆ˜ ìˆìœ¼ë©´ ê·¸ê²ƒì€ ì½˜ì„¼íŠ¸ë¼ê³  ë¶€ë¥¼ ìˆ˜ ìˆë‹¤.

<br>

# TypsScript êµ¬ì¡°ì  íƒ€ì´í•‘ ì´í•´í•˜ê¸°

```javascript
interface Vector2D {
  x: number;
  y: number;
}

function calculateLength(v: Vector2D) {
  return Math.sqrt(v.x * v.x + v.y * v.y);
}

interface NamedVector {
  name: string;
  x: number;
  y: number;
}
```

`NamedVector`ëŠ” number íƒ€ì…ì¸ xì™€ yì†ì„±ì´ ìˆê¸° ë•Œë¬¸ì—

calculateLength í•¨ìˆ˜ë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒ ì½”ë“œë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤.

```javascript
const v: NameVector = { x: 3, y: 5, name: "JEWON" };
calculateLength(v); // return 5
```

- Vector2Dì™€ NamedVectorì˜ ê´€ê³„ë¥¼ ì „í˜€ ì„ ì–¸í•˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒ

- NamedVetorë¥¼ ìœ„í•œ ë³„ë„ì˜ calculateLengthë¥¼ êµ¬í˜„í•˜ì§€ ì•ŠìŒ

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íƒ€ì… ì‹œìŠ¤í…œì€ ìë°”ìŠ¤ë¦½íŠ¸ì˜ ëŸ°íƒ€ì„ ë™ì‘ì„ ëª¨ë¸ë§ í•˜ê²Œ ë˜ëŠ”ë°

NamedVectorì˜ êµ¬ì¡°ê°€ Vector2Dì™€ í˜¸í™˜ë˜ê¸° ë•Œë¬¸ì— calculatorLength í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤

ì—¬ê¸°ì„œ ë°”ë¡œ [êµ¬ì¡°ì  íƒ€ì´í•‘(structural typing)](https://www.typescriptlang.org/docs/handbook/type-compatibility.html) ì´ë¼ëŠ” ìš©ì–´ê°€ ì‚¬ìš©ëœë‹¤

<br>

# êµ¬ì¡°ì  íƒ€ì´í•‘ì˜ ë¬¸ì œì 

êµ¬ì¡°ì  íƒ€ì´í•‘ ë•Œë¬¸ì— ì½”ë“œìƒì˜ ë¬¸ì œê°€ ë°œìƒí•˜ê¸°ë„ í•œë‹¤, 3D ë²¡í…Œë¥¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ì

```javascript
// wrong point 1

interface Vector3D {
  x: number;
  y: number;
  z: number;
}
// ë²¡í„°ì˜ ê¸¸ì´ë¥¼ 1ë¡œ ë§Œë“œëŠ” ì •ê·œí™” í•¨ìˆ˜
function normalize(v: Vector3D) {
  const length = caclulateLength(v);

  return {
    x: v.x,
    y: v.y,
    z: v.z,
  };
}

normalize({ x: 3, y: 4, z: 5 });
// return value : { x: 0.6, y: 0.8, z: 1}
// ì´ í•¨ìˆ˜ëŠ” 1ë³´ë‹¤ ì €ê¸ˆ ë” ê¸´(1.41) ê¸¸ì´ë¥¼ ê°€ì§„ ê²°ê³¼ë¥¼ ì¶œë ¥
```

- calculateLengthëŠ” 2D ë²¡í„° ê¸°ë°˜ìœ¼ë¡œ ì—°ì‚°

- ìœ„ì˜ ë²„ê·¸ë¡œ ì¸í•´ normalizeê°€ 3D ë²¡í„°ë¡œ ì—°ì‚°ë˜ì—ˆìŒ ì¦‰, zê°€ ì •ê·œí™”ì—ì„œ ë¬´ì‹œëœ ê²ƒ

<br>

## TypeScriptëŠ” ì™œ í•´ë‹¹ í•¨ìˆ˜ì˜ íƒ€ì… ì²´í¬ì— ì‹¤íŒ¨í–ˆì„ê¹Œ ?

<br>

Vector3Dì™€ í˜¸í™˜ë˜ëŠ” {x, y, z} ê°ì²´ëŠ” calculateLengthë¥¼ í˜¸ì¶œí•˜ë©´,

êµ¬ì¡°ì  íƒ€ì´í•‘ ê´€ì ì—ì„œ xì™€ yê°€ ìˆê¸° ë•Œë¬¸ì— Vector2Dì™€ í˜¸í™˜í•˜ê²Œ ëœë‹¤

ë”°ë¼ì„œ ì˜¤ë¥˜ë¥¼ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©°, íƒ€ì… ì²´ì»¤ê°€ ë¬¸ì œë¡œ ì¸ì‹í•˜ì§€ ì•Šê²Œ ëœë‹¤

í•¨ìˆ˜ë¥¼ ì‘ì„±í•  ë•Œ, í˜¸ì¶œì— ì‚¬ìš©ë˜ëŠ” ë§¤ê°œë³€ìˆ˜ì˜ ì†ì„±ë“¤ì´ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì… ì„ ì–¸ëœ ì†ì„±ë§Œì„ ê°€ì§ˆ ê±°ë¼ ìƒê°í•˜ê¸° ì‰½ë‹¤

ì´ëŸ¬í•œ íƒ€ì…ì€ `ë´‰ì¸ëœ(sealed` ë˜ëŠ” `ì •í™•í•œ(precise)` íƒ€ì…ì´ë¼ê³  ë¶ˆë¦¬ë©°,

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íƒ€ì… ì‹œìŠ¤í…œì—ì„œëŠ” í‘œí˜„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ ì¢‹ë“  ì‹«ë“  íƒ€ì…ì€ í•­ìƒ `ì—´ë ¤(open)` ìˆë‹¤

> ğŸ’¡ ì—´ë¦° íƒ€ì…
>
> íƒ€ì…ì´ ì—´ë ¤ ìˆë‹¤ëŠ” ê²ƒì€, íƒ€ì…ì˜ í™”ì¥ì— ì—´ë ¤ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤,
>
> ì¦‰, íƒ€ì…ì— ì„ ì–¸ëœ ì†ì„± ì™¸ì— ì„ì˜ì˜ ì†ì„±ì„ ì¶”ê°€í•˜ë”ë¼ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤
>
> ì˜ˆë¥¼ ë“¤ì–´, ê³ ì–‘ì´ë¼ëŠ” íƒ€ì…ì— í¬ê¸° ì†ì„±ì„ ì¶”ê°€í•˜ì—¬ 'ì‘ì€ ê³ ì–‘ì´'ê°€ ë˜ì–´ë„ ê³ ì–‘ì´ë¼ëŠ” ì‚¬ì‹¤ì€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤

```javascript
// wrong point 2

interface Vector3D {
  x: number;
  y: number;
  z: number;
}

function calculateLengthL1(v: Vector3D) {
  for (const axis of Object.keys(v)) {
    const coord = v[axis];

    //Element implicitly has an 'any' type because expression of type 'string' can't be used to index type 'Vector3D'.
    //  No index signature with a parameter of type 'string' was found on type 'Vector3D'.

  No index signature with a parameter of type 'string' was found on type 'Vector3D'.

    length += Math.abs(coord);
  }

  return length;
}
```

ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ê°€ ë­˜ê¹Œ axisëŠ” Vector3Dì˜ íƒ€ì…ì¸ vì˜ í‚¤ ì¤‘ í•˜ë‚˜ì´ê¸° ë•Œë¬¸ì—

"x", "y", "z"ì¤‘ì— í•˜ë‚˜ì„ì´ ë¶„ëª…í•˜ë‹¤ ê·¸ë¦¬ê³  Vector3Dì˜ ì„ ì–¸ì— ë”°ë¥´ë©´,

ì´ë“¤ì€ ëª¨ë‘ numberì´ë¯€ë¡œ coordì˜ íƒ€ì…ì´ numberê°€ ë˜ì–´ì•¼ í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤

í•˜ì§€ë§Œ ì‚¬ì‹¤ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì˜¤ë¥˜ë¥¼ ì •í™•íˆ ì°¾ì•„ë‚¸ ê²ƒì´ ë§ë‹¤

ì•ì—ì„œ Vector3DëŠ” ë´‰ì¸(ë‹¤ë¥¸ ì†ì„±ì´ ì—†ë‹¤)ë¼ê³  ê°€ì •í•œ ìƒíƒœë¡œ ë‹¤ìŒ ì½”ë“œë„ ì‘ì„±í• ìˆ˜ë„ ìˆë‹¤

```javascript
const vec3D = { x: 3, y: 4, z: 1, address: "123 Brodway" };
calculateLength1(vec3D); // 'ok' return NaN
```

```javascript
// wrong point 3

class C {
  foo: string;
  constructor(foo: string) {
    this.foo = foo;
  }
}

const c = new C("instace Of C");
const d: C = { foo: "object literfal" }; // OK
```

dê°€ Cíƒ€ì…ì— í• ë‹¹ë˜ë‹Œ ì´ìœ ë¥¼ ì•Œì•„ë³´ì dëŠ” string íƒ€ì…ì˜ foo ì†ì„±ì„ ê°–ê²Œ ëœë‹¤

ê²Œë‹¤ê°€ í•˜ë‚˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ í˜¸ì¶œì´ ë˜ëŠ” ìƒì„±ìë¥¼ ê°–ê²Œ ë˜ëŠ”ë°

ê·¸ë˜ì„œ êµ¬ì¡°ì ìœ¼ë¡œ í•„ìš”í•œ ì†ì„±ê³¼ ìƒì„±ìê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì—†ë‹¤

ë§Œì•½ Cì˜ ìƒì„±ìì— ë‹¨ìˆœ í• ë‹¹ì´ ì•„ë‹Œ ì—°ì‚° ë¡œì§ì´ ì¡´ì¬í•œë‹¤ë©´,

dì˜ ê²½ìš°ëŠ” ìƒì •ìë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ëœë‹¤

ì´ëŸ¬í•œ ë¶€ë¶„ì´ C íƒ€ì…ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì—¬ C ë˜ëŠ” ì„œë¸Œí´ë˜ìŠ¤ì„ì„ ë³´ì¥í•˜ëŠ” C++ì´ë‚˜

ìë°” ê°™ì€ ì–¸ì–´ì™€ ë§¤ìš° ë‹¤ë¥¸ íŠ¹ì§•ì´ë‹¤
